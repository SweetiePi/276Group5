<% provide(:title, "Resources - #{@group.name}") %>
<% provide(:main_title, @group.name) %>

<div class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title">Group Resources</h1>
  </div>
  <div class="table-responsive">
    <table class="table table-striped table-hover" id="resources">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Type</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if @resources.size <= 0 %>
          <tr>
            <td colspan="4" style="text-align: center;"><strong>No Group Resources</td>
          </tr>
        <% end %>
        <% @resources.each do |r| %>
          <tr>
            <td><%= r.name %><br><small><%= r.user.nil? ? "Deleted User" : (link_to r.user.name, r.user) %><br><%= r.created_at.in_time_zone.strftime("%b %d %Y, %l:%M %p") %></small></td>
            <td><%= markdown(r.description) %></td>
            <td><%= r.file_type_string %></td>
            <td style="min-width: 300px;">
              <div class="col-xs-4">
                <% if current_user?(r.user) or current_user.admin? %>
                  <%= link_to "Open", resource_group_path(@group, resource_id: r), class: "btn btn-default btn-block btn-sm", target: '_blank', role: "button" %>
                <% end %>
              </div>
              <div class="col-xs-4">
                <% if current_user?(r.user) or current_user.admin? %>
                  <%= link_to "Edit", edit_resource_group_path(@group, resource_id: r), class: "btn btn-primary btn-block btn-sm", role: "button" %>
                <% end %>
              </div>
              <div class="col-xs-4">
                <% if current_user?(r.user) or current_user.admin? %>
                  <%= link_to "Delete", resource_group_path(@group, resource_id: r), method: "delete", class: "btn btn-danger btn-block btn-sm", role: "button", data: { confirm: "Are you sure you want to delete this resource?" } %>
                <% end %>
              </div>

          </tr>
        <% end %>
        <tr>
          <td colspan="4"><%= link_to "Create New Resource", new_resource_group_path(@group), class: "btn btn-primary btn-block", role: "button" %></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
