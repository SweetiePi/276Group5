<%= form_for(@user, html: {class: 'form-horizontal'}) do |f| %>
<%= render partial: 'shared/error_messages', locals: {obj: @user} %>

  <%= f.hidden_field :cas_identifier %>
  <div class="form-group">
    <%= label_tag nil, 'Current Email', class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <p class="form-control-static"><%= @user.email %></p>
    </div>
  </div>
  <div class="form-group <%= 'field_with_errors' if @user.errors[:new_email].present? %>">
    <%= label_tag nil, 'New Email', class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <%= email_field_tag :new_email, nil, class: 'form-control', placeholder: 'New Email' %>
    </div>
  </div>

  <hr>

  <div class="form-group">
    <%= f.label :password, 'New Password', class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <div class="input-group">
        <%= f.password_field :password, class: 'form-control', placeholder: 'Password' %>
        <span class="input-group-btn">
          <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="top" title="Passwords must be at least 6 characters" tabindex="-1">
            <span class="glyphicon glyphicon-question-sign"></span>
          </button>
        </span>
      </div>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :password_confirmation, (current_page?(root_path) ? 'Confirm' : 'Confirm Password'), class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <%= f.password_field :password_confirmation, class: 'form-control', placeholder: 'Confirm Password' %>
    </div>
  </div>

  <hr>

  <div class="form-group">
    <%= label_tag nil, 'Delete Account', class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <p class="form-control-static">Contact an Administrator if you would like to delete your account.</p>
    </div>
  </div>

  <hr>

  <div class="form-group" style="text-align: center;">
    Please enter your current password to make any changes.
  </div>

  <div class="form-group <%= 'field_with_errors' if @user.errors[:current_password].present? %>">
    <label class="col-sm-4 col-md-3 control-label" for="user_current_password">Current Password</label>
    <div class="col-sm-8 col-md-9">
      <%= password_field_tag :current_password, '', class: 'form-control', placeholder: 'Current Password' %>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-6 col-xs-offset-3 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
      <%= f.submit yield(:save_button_title), class: "btn btn-primary btn-block", id: 'submit_btn', disabled: 'disabled' %>
    </div>
  </div>
<% end %>
