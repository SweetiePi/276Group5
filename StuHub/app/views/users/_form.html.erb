<%= javascript_tag do %>
  <!-- Investigate native Rails solution? -->
  VerifyTOSAccept = function() {
    var submitBtn = document.getElementById("submit_btn");
    var acceptCM = document.getElementById("register_tos_agree");
    if (acceptCM.checked == true) {
      submitBtn.removeAttribute("disabled");
    }
    else {
      var disable = document.createAttribute("disabled");
      disable.value = "disabled";
      submitBtn.setAttributeNode(disable);
    }
  }
<% end %>

<%= form_for(@user, html: {class: 'form-horizontal'}) do |f| %>
  <%= render 'shared/error_messages' %>

  <div class="form-group">
    <%= f.label :name, class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <%= f.text_field :name, class: 'form-control', placeholder: 'Name' %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :email, class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <%= f.email_field :email, class: 'form-control', placeholder: 'Email' %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :password, class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <div class="input-group">
        <%= f.password_field :password, class: 'form-control', placeholder: 'Password' %>
        <span class="input-group-btn">
          <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="top" title="Passwords must be at least 6 characters">
            <span class="glyphicon glyphicon-question-sign"></span>
          </button>
        </span>
      </div>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :password_confirmation, (current_page?(root_path) ? 'Confirm' : 'Confirm Password'), class: 'col-sm-4 col-md-3 control-label' %>
    <div class="col-sm-8 col-md-9">
      <%= f.password_field :password_confirmation, class: 'form-control', placeholder: 'Confirm Password' %>
    </div>
  </div>

  <% if !current_page?(root_path) and !current_page?(register_path) %>
    <div class="form-group" style="text-align: center;">
      <h4>StuHub uses avatars from Gravatar</h4>
      <p><a href="http://gravatar.com/emails" target="_blank">Manage your avatars directly on their site.</a></p>
    </div>
  <% end %>
  <%= yield :checkbox %>
  <% if !current_user.more_powerful(true, @user) and !current_page?(root_path) and !current_page?(register_path) %>
    <hr>
    <div class="form-group" style="text-align: center;">
      Changing any of these settings requires your current password.
    </div>
    <div class="form-group <%= 'field_with_errors' if @user.errors[:current_password].present? %>">
      <label class="col-sm-4 col-md-3 control-label" for="user_current_password">Current Password</label>
      <div class="col-sm-8 col-md-9">
        <%= password_field_tag :current_password, '', class: 'form-control', placeholder: 'Current Password' %>
      </div>
    </div>
  <% end %>
  <div class="row">
    <div class="col-xs-6 col-xs-offset-3 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
      <%= f.submit yield(:save_button_title), class: "btn btn-primary btn-block", id: 'submit_btn', disabled: 'disabled' %>
    </div>
  </div>
<% end %>
